<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOALS | BRAVEHART LIFEOS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script>
        if (!sessionStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>

    <header>
        <div class="header-container">
            <div class="brand">
                <h1>ü¶Å BRAVEHART LIFEOS</h1>
                <p class="tagline">OPERATING SYSTEM FOR A LEGENDARY LIFE</p>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">üè† DASHBOARD</a></li>
                    <li><a href="profile.html">üë§ PROFILE</a></li>
                    <li><a href="memories.html">üì∏ MEMORIES</a></li>
                    <li><a href="videos.html">üé¨ VIDEOS</a></li>
                    <li><a href="people.html">üë• PEOPLE</a></li>
                    <li><a href="skills.html">‚ö° SKILLS</a></li>
                    <li><a href="goals.html" class="active">üéØ GOALS</a></li>
                    <li><a href="timeline.html">üìÖ TIMELINE</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="page-header">
            <h2>üéØ MISSION OBJECTIVES üéØ</h2>
        </section>

        <section class="vision-section" style="margin-bottom: 4rem; text-align: center;">
            <h3 style="color: var(--accent-gold); letter-spacing: 3px;">üåü LIFE VISION</h3>
            <p id="life-vision" style="font-size: 1.5rem; max-width: 800px; margin: 1.5rem auto; line-height: 1.8; font-weight: 300;">
                INITIALIZING MISSION BRAIN...
            </p>
        </section>

        <div style="display: grid; grid-template-columns: 1fr; gap: 30px; margin-bottom: 4rem;">
            <div>
                <h3 class="section-title">üìÖ ACTIVE OBJECTIVES</h3>
                <div id="goals-container">
                    </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>ü¶Å BRAVEHART LIFEOS - BUILDING A LEGENDARY LIFE, ONE DAY AT A TIME ü¶Å</p>
        </div>
    </footer>

    <script>
        async function syncGoals() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                
                // Update Vision Statement from Profile Data
                document.getElementById('life-vision').innerText = `"${data.profile.mission}"`;

                const container = document.getElementById('goals-container');
                container.innerHTML = ''; // Clear loading

                data.goals.forEach(goal => {
                    const statusClass = goal.status.toLowerCase().replace(" ", "-") + "-tag";
                    const barColor = goal.progress === 100 ? 'var(--success-green)' : 'var(--primary-blue)';

                    const goalCard = document.createElement('div');
                    goalCard.className = 'goal-card';
                    goalCard.innerHTML = `
                        <div class="goal-header">
                            <h4>${goal.title}</h4>
                            <span class="goal-status ${statusClass}">${goal.status.toUpperCase()}</span>
                        </div>
                        <p>Target Date: <span style="color: var(--accent-gold);">${goal.deadline}</span></p>
                        <div class="skill-bar" style="margin: 15px 0 5px 0;">
                            <div class="skill-progress" style="width: ${goal.progress}%; background: ${barColor};"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                            <span>${goal.progress}% Complete</span>
                        </div>
                    `;
                    container.appendChild(goalCard);
                });

            } catch (error) {
                console.error("Goals Sync Error:", error);
                document.getElementById('life-vision').innerText = "ERROR LOADING MISSION DATA.";
            }
        }

        window.onload = syncGoals;
    </script>
</body>
</html>